jQuery.vsprintf=function(a,b){function c(a,b,c){if(void 0==b)return"s"==a?"":"0";var d,e="",f="",g=" ";if(c["short"]||c["long"]||c.long_long)switch(a){case"e":case"f":case"G":case"E":case"G":case"d":c["short"]?b>=32767?b=32767:-32768>=b&&(b=-32768):c["long"]?b>=2147483647?b=2147483647:-2147483648>=b&&(b=-2147483648):b>=0x8000000000000000?b=0x8000000000000000:-0x8000000000000000>=b&&(b=-0x8000000000000000);break;case"X":case"B":case"u":case"o":case"x":case"b":0>b&&(b=Math.abs(b)-1),c["short"]?b>=65535&&(b=65535):c["long"]?b>=4294967295&&(b=4294967295):b>=0x10000000000000000&&(b=0x10000000000000000)}switch(a){case"c":d=String.fromCharCode(parseInt(b));break;case"s":d=b.toString();break;case"d":d=new Number(parseInt(b)).toString();break;case"u":d=new Number(parseInt(b)).toString();break;case"o":d=new Number(parseInt(b)).toString(8);break;case"x":d=new Number(parseInt(b)).toString(16);break;case"B":case"b":d=new Number(parseInt(b)).toString(2);break;case"e":var h=c.precision?c.precision:6;d=new Number(b).toExponential(h).toString();break;case"f":var h=c.precision?c.precision:6;d=new Number(b).toFixed(h).toString();break;case"g":var h=c.precision?c.precision:6;d=new Number(b).toPrecision(h).toString();break;case"X":d=new Number(parseInt(b)).toString(16).toUpperCase();break;case"E":var h=c.precision?c.precision:6;d=new Number(b).toExponential(h).toString().toUpperCase();break;case"G":var h=c.precision?c.precision:6;d=new Number(b).toPrecision(h).toString().toUpperCase()}if(c["+"]&&parseFloat(b)>0&&-1!=["d","e","f","g","E","G"].indexOf(a)&&(e="+"),c[" "]&&parseFloat(b)>0&&-1!=["d","e","f","g","E","G"].indexOf(a)&&(e=" "),c["#"]&&0!=parseInt(b))switch(a){case"o":e="0";break;case"x":case"X":e="0x";break;case"b":e="0b";break;case"B":e="0B"}if(c[0]&&!c["-"]&&(g="0"),c.width&&c.width>d.length+e.length)for(var i=c.width-d.length-e.length,j=0;i>j;++j)f+=g;return c["-"]&&!c[0]?d+=f:d=f+d,e+d}if(null==a)throw"Not enough arguments for vsprintf";null==b&&(b=[]);for(var d="",e=0,f=0,g={"long":!1,"short":!1,long_long:!1},h=!1,i=!1,j=!1,k=!1,l=!1,m=!1,n=".",o=0;o<a.length;++o){var p=a.charAt(o);if(h){switch(p){case"i":p="d";break;case"D":g["long"]=!0,p="d";break;case"U":g["long"]=!0,p="u";break;case"O":g["long"]=!0,p="o";break;case"F":p="f"}switch(p){case"c":case"s":case"d":case"u":case"o":case"x":case"e":case"f":case"g":case"X":case"E":case"G":case"b":case"B":var q=b[f];if(l){var r=q;if(q instanceof Array)r=q;else if("string"==typeof q||q instanceof String)r=q.split("").map(function(a){return a.charCodeAt()});else if(("number"==typeof q||q instanceof Number)&&g.bitwidth){r=[];do r.unshift(q&~(-1<<g.bitwidth));while(q>>>=g.bitwidth)}else r=q.toString().split("").map(function(a){return a.charCodeAt()});d+=r.map(function(a){return c(p,a,g)}).join(n)}else d+=c(p,q,g);k||++e,f=e,g={},i=!1,h=!1,j=!1,k=!1,l=!1,m=!1,n=".";break;case"v":l=!0;break;case" ":case"0":case"-":case"+":case"#":g[p]=!0;break;case"*":i=!0;break;case".":j=!0;break;case"@":m=!0;break;case"l":g["long"]?(g.long_long=!0,g["long"]=!1):(g["long"]=!0,g.long_long=!1),g["short"]=!1;break;case"q":case"L":g.long_long=!0,g["long"]=!1,g["short"]=!1;break;case"h":g["short"]=!0,g["long"]=!1,g.long_long=!1}if(/\d/.test(p)){var s=parseInt(a.substr(o)),t=s.toString().length;o+=t-1;var u=a.charAt(o+1);if("$"==u){if(0>s||s>b.length)throw"out of bound";i?(j?(g.precision=b[s-1],j=!1):"v"==a.charAt(o+2)?n=b[s-1]:g.width=b[s-1],i=!1):(k=!0,f=s-1),++o}else j?(g.precision=s,j=!1):m?(g.bitwidth=s,m=!1):g.width=s}else i&&!/\d/.test(a.charAt(o+1))&&(j?(g.precision=b[f],j=!1):"v"==a.charAt(o+1)?n=b[f]:g.width=b[f],++e,k||f++,i=!1)}else{if("%"==p){if("%"==a.charAt(o+1)){d+="%",++o;continue}h=!0;continue}d+=p}}return d},jQuery.sprintf=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var a=Array.prototype.slice.call(arguments),b=a.shift();return jQuery.vsprintf(b,a)},jQuery.fn.printf=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var a=Array.prototype.slice.call(arguments),b=a.shift();return this.append(jQuery.vsprintf(b,a))},jQuery.fn.vprintf=function(a,b){if(0==arguments.length)throw"Not enough arguments for sprintf";return this.append(jQuery.vsprintf(a,b))},jQuery.fn.vformat=function(a){if(0==arguments.length)throw"Not enough arguments for sprintf";return this.each(function(){self=jQuery(this),self.html(jQuery.vsprintf(self.html(),a))})},jQuery.fn.format=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var a=Array.prototype.slice.call(arguments);return this.each(function(){self=jQuery(this),self.html(jQuery.vsprintf(self.html(),a))})},jQuery.printf=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var a=Array.prototype.slice.call(arguments),b=a.shift(),c=jQuery.vsprintf(b,a);window.console?window.console.info(c):window.dump(c)},jQuery.vprintf=function(a,b){if(0==arguments.length)throw"Not enough arguments for sprintf";var c=jQuery.vsprintf(a,b);window.console?window.console.info(c):window.dump(c)};